multipages-generator [![NPM version](https://badge.fury.io/js/multipages-generator.png)](http://badge.fury.io/js/multipages-generator)
======

[![NPM](https://nodei.co/npm/multipages-generator.png?downloads=true&stars=true)](https://nodei.co/npm/multipages-generator)

multipages-generator ï¼ˆMGï¼‰ ğŸ¤¡æ˜¯ä¸€ä¸ªåƒexpress-generatorä¸€æ ·å¿«é€Ÿç”Ÿæˆç½‘ç«™å¼€å‘è„šæ‰‹æ¶çš„npmæ¨¡å—ï¼Œå¯ä»¥å…¨å±€å®‰è£…ã€‚åªè¦ä¸€ä¸ªå‘½ä»¤å³å¯ç”Ÿæˆå¤šé¡µé¢çš„expresså·¥ç¨‹ï¼Œæ˜¯å¤šé¡µé¢webpackç¼–è¯‘çš„æœ€ä½³å®è·µæ¨¡æ¿ï¼Œæœ€é€‚åˆå¤šä¸ªç‹¬ç«‹çš„ç§»åŠ¨ç«¯h5é¡¹ç›®ï¼Œæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š

## é€‚åˆåœºæ™¯
å¦‚ç¾æŸšï¼Œæ·˜å®ï¼Œä»Šæ—¥å¤´æ¡ï¼Œå¾®ä¿¡å†…åˆ†äº«çš„ç­‰ç‹¬ç«‹çš„ï¼Œå°çš„h5ï¼Œå¯ä»¥æ˜¯å¹¿å‘Šï¼Œè¥é”€ï¼Œæ´»åŠ¨ï¼Œå±•ç¤ºé¡µï¼Œç§€è‚Œè‚‰ï¼Œå¥½ç©çš„h5ï¼Œå¦‚[è¿™äº›](http://www.ih5.cn/not-logged-in/template)ã€‚
è¿˜æœ‰æˆ‘ä»¬çš„ä¾‹å­ï¼š
[ç¾æŸšåƒé¸¡æ¸¸æˆ](https://uedkit.meiyou.com/annualmeeting/game/)

## ä¼˜åŠ¿æ˜¯ ä»€ä¹ˆï¼Ÿ
å®Œæ•´çš„h5è§£å†³æ–¹æ¡ˆï¼Œå¿«é€Ÿå¼€å‘ï¼Œè‡ªåŠ¨å®Œæˆæ€§èƒ½ä¼˜åŒ–ï¼ˆç›®å‰åªæ˜¯åŸºæœ¬åŠŸèƒ½ï¼Œæœªå®ŒæŒç»­ï¼Œåé¢æ”¯æŒ[google web æ€§èƒ½ä¼˜åŒ–](https://developers.google.com/web/fundamentals/performance/why-performance-matters/)

## ç‰¹ç‚¹

1. æ”¯æŒwebpackç¼–è¯‘å¤šé¡µé¢ï¼Œå¯ç¼–è¯‘æŒ‡å®šé¡¹ç›®
2. ä½¿ç”¨Node.jsï¼Œæ˜¯ä¸€ä¸ªå…¨æ ˆçš„è§£å†³æ–¹æ¡ˆ
3. å‰ç«¯ç¼–è¯‘æ”¯æŒçƒ­æ›´æ–°
4. ç¼–è¯‘å‡ºçš„ç½‘é¡µæ€§èƒ½ç»è¿‡ä¼˜åŒ–ï¼Œç¬¦åˆæœ€ä½³å®è·µï¼ˆè¿˜ä¸å®Œå–„ï¼Œåé¢åŠ å…¥[æ·˜å®æ€§èƒ½ä¼˜åŒ–çš„å…¨éƒ¨å†…å®¹](https://github.com/amfe/article/issues/21)ï¼‰
5. æ”¯æŒdevelopment,productonç¯å¢ƒåŒºåˆ†
6. productonç¯å¢ƒå¯é…ç½®ç”Ÿäº§çš„css,js,imagesè‡ªåŠ¨ç¼–è¯‘åä¸Šä¼ OSSæœåŠ¡å™¨
7. webpackç¼–è¯‘åçš„htmlæ¨¡æ¿æ”¯æŒejsç­‰æ¨¡æ¿å¼•æ“
8. æ”¯æŒpm2é›†ç¾¤å¯åŠ¨
9. ğŸ”¥ (æ–°) åŠ å…¥[æ‰‹æ·˜flexibleå¸ƒå±€æ–¹æ¡ˆ](https://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html)ï¼Œé€‚é…ä¸åŒå°ºå¯¸å’ŒDPIçš„å±å¹•ï¼ŒåŠ å…¥postcssæ”¯æŒ
10. ğŸ”¥ (æ–°) æ”¯æŒç”Ÿäº§releaseæ¨¡å¼ï¼Œé…ç½®ä¸‹ä¸ƒç‰›äº‘CDNï¼Œç¼–è¯‘åjsï¼Œcssï¼Œå›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶ä¸Šä¼ cdn


## Document
* [æ”¯æŒçš„ç¯å¢ƒ](#æ”¯æŒçš„ç¯å¢ƒ)
* [å…¨å±€å®‰è£…](#å®‰è£…)
* [è·‘èµ·æ¥ï¼](#è¿è¡Œä¸å¼€å‘)
* [åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®](#æ–°å¢ä¸€ä¸ªé¡¹ç›®)
* [ç¤ºä¾‹é¡µé¢](#ç¤ºä¾‹é¡µé¢)
* [é…ç½®](#é…ç½®)
  * [Releaseæ¨¡å¼ä¸Šä¼ åˆ°CDN](#releaseæ¨¡å¼ä¸Šä¼ åˆ°cdn)
     * [ä¸ƒç‰›äº‘CDN](#ä¸ƒç‰›äº‘cdn)
     * [é˜¿é‡Œäº‘OSS](#é˜¿é‡Œäº‘oss)
     * [å…¶ä»–CDN](#å…¶ä»–cdn)
* [æœªæ¥è®¡åˆ’](#æœªæ¥è®¡åˆ’)

## æ”¯æŒçš„ç¯å¢ƒ
è¿è¡Œçš„ç¯å¢ƒè¦æ±‚

nodeç¯å¢ƒï¼šnode.js 6.11.0

æ“ä½œç³»ç»Ÿï¼šæ”¯æŒ macï¼Œwindowsï¼Œcentos

## å®‰è£… âš™ï¸

é€šè¿‡NPMå…¨å±€å®‰è£…å³å¯ä½¿ç”¨ï¼š

```bash
npm install multipages-generator -g
```

## åˆ›å»ºå¹¶è¿è¡ŒğŸ“½

æ­¥éª¤ä¸€ï¼šæ‰§è¡Œmultipages-generateåˆ›å»ºç½‘ç«™
```bash
multipages-generate

```
æ­¥éª¤äºŒï¼šå‡ºç°è¾“å…¥é¡¹ç›®åæç¤ºï¼Œå¹¶è¾“å…¥æ‚¨çš„é¡¹ç›®åç§°
```bash
? Project name: <è¾“å…¥é¡¹ç›®å>

```

æ­¥éª¤ä¸‰ï¼šè¿›å…¥å·¥ç¨‹åï¼Œå¹¶ä¸‹è½½ä¾èµ–åŒ…
```bash
     cd {ä½ çš„é¡¹ç›®å}
     npm install
```

æ­¥éª¤å››: å¯åŠ¨æŒ‡å®šçš„h5åº”ç”¨
```
    npm run dev:demo //æ ¹æ®ä½ è‡ªå·±çš„webpacké…ç½®è€Œå®š

```
å››æ­¥éª¤ä¹‹åï¼Œä½ é»˜è®¤çš„æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€æ­¤é¡µé¢ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œæ‰‹åŠ¨è®¿é—®localhost:2000ï¼‰

==æ³¨æ„ï¼Œç›®å‰å‘ç°demoä¾‹å­çš„ç´ æå›¾ç‰‡ï¼ˆåœ¨/client/demo/imgs ç›®å½•ä¸‹ï¼‰ç»è¿‡å…¨å±€å®‰è£…ä¼šç¼–ç å‡ºé—®é¢˜ã€‚ä¸å½±å“è¿è¡Œï¼Œä½†æ˜¯å¦‚æœæƒ³çœ‹åˆ°ä¸Šé¢çš„demoé¡µé¢è¯·ä»[æˆ‘çš„ç½‘ç›˜](https://pan.baidu.com/s/1GyIunAicYsS3dCtJx-9hkg) ä¸‹è½½ç´ æå›¾ç‰‡ï¼Œè§£å‹æ”¾åˆ°/client/demo/imgs ç›®å½•ä¸‹å…¨éƒ¨æ›¿æ¢é‚£äº›å‡ºé—®é¢˜çš„å›¾ç‰‡==

å°†æ¥ä¼šé€‰ç”¨æ›´åŠ é€‚å½“çš„demoåšæ¼”ç¤º

## è¿è¡Œä¸å¼€å‘
### å¯åŠ¨æŒ‡å®šåº”ç”¨
ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œä½ å·²ç»å¯åŠ¨äº†æŒ‡å®šçš„åº”æœ‰ï¼Œå‰ç«¯ä»£ç æ”¯æŒçƒ­æ›´æ–°ï¼Œä¿®æ”¹htmlï¼Œcssï¼Œjsç­‰æ–‡ä»¶éƒ½ä¼šè§¦å‘æµè§ˆå™¨çƒ­æ›´æ–°

æœåŠ¡ç«¯ä¿®æ”¹ä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚å¦‚æœéœ€è¦æœåŠ¡ç«¯ä¹Ÿè¦çƒ­å¯åŠ¨ï¼Œéœ€è¦åˆ‡æ¢åˆ°æœåŠ¡ç«¯å¼€å‘æ¨¡å¼(++æœåŠ¡ç«¯å¼€å‘æ¨¡å¼å…³é—­äº†å‰ç«¯çƒ­å¯åŠ¨ï¼Œè€Œä¸”å‰ç«¯é¡µé¢æ­¤æ—¶ä¹Ÿæ— æ³•è®¿é—®ï¼Œå»ºè®®å‰ååˆ†ç¦»å¼€å‘, å¹¶ä¸”æœåŠ¡ç«¯å…ˆäºå‰ç«¯å¼€å‘ã€‚æˆ–è€…å†èµ·ä¸€ä¸ªæœåŠ¡ï¼Œä¿®æ”¹ç«¯å£ï¼Œä»£ç†è®¿é—®++)
```
    npm run start
```

## æ–°å¢ä¸€ä¸ªé¡¹ç›®
1. client ç›®å½•ä¸‹å·²æœ‰ä¸ªdemoåº”ç”¨ï¼Œæ–°å¢ä¸€ä¸ªåº”ç”¨demo2ï¼ˆåç§°éšæ„ï¼‰ï¼Œç›®å½•ç»“æ„éœ€å‚è€ƒdemo
    ```bash
    demo
     â”œâ”€css
     â”œâ”€imgs
     â””â”€js
    ```

    html ä¸ºäº†æ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œåˆ™æŠŠé¡µé¢æ”¾åœ¨server/views/dev/demo ä¸‹

2. package.js æ–°å¢å¯¹åº”çš„å¼€å‘æŒ‡ä»¤ï¼Œå‚è€ƒdemoçš„é…ç½®æ–¹å¼
```bash
    "dev:demo2": "cross-env ENV=dev PROJECT_NAME=demo2 node app.js",
```
3.  é…ç½®å¯¹åº”åº”ç”¨çš„ç”Ÿäº§ç¼–è¯‘æŒ‡ä»¤ï¼Œå‚è€ƒdemoçš„é…ç½®æ–¹å¼
```bash
    "release:demo2": "cross-env ENV=prod PROJECT_NAME=demo2 node ./config/release.js",

```
é…ç½®å®Œæˆä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œå¯åŠ¨å’Œå¼€å‘äº†

```
    npm run dev:demo2
```

## ç¤ºä¾‹é¡µé¢
![image](http://ovn18u9yn.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20180328152125.jpg?imageView2/1/w/375/h/667)

æŸ¥çœ‹DEMOç”¨æ‰‹æœºchromeï¼Œæ·˜å®ï¼Œå¾®ä¿¡ç­‰æ‰«ä¸‹äºŒç»´ç æŸ¥çœ‹

![image](http://oflt40zxf.bkt.clouddn.com/1522288108.png)

## é…ç½®
mg.config.js æ ¹ç›®å½•ä¸‹æœ‰ä¸ªmg.config.js

è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œç›®å‰é…ç½®äº†ä¸ƒç‰›äº‘CDNä¸Šä¼ çš„å‡­è¯é…ç½®ï¼Œå¦‚æœè¦å¢å®¶redisï¼Œmysqlï¼Œmongodbç­‰é…ç½®ï¼Œä¹Ÿå»ºè®®æ”¾åœ¨è¿™é‡Œï¼›

postcss.config.js åŒæ ·åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ˜¯postcss.config.jsçš„é…ç½®æ–‡ä»¶

process.json åŒæ ·åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ˜¯éƒ¨ç½²æ—¶çš„pm2å¯åŠ¨é…ç½®æ–‡ä»¶

### Releaseæ¨¡å¼ä¸Šä¼ åˆ°CDN
MGæ”¯æŒå¼€å‘æ¨¡å¼ï¼Œä¹Ÿæ”¯æŒå‘å¸ƒç”Ÿäº§æ¨¡å¼ï¼Œç”Ÿäº§æ¨¡å¼ç¼–è¯‘å‡ºæ¥çš„èµ„æºä¼šå‘å¸ƒåˆ°CDNï¼Œç›®å‰é»˜è®¤æ˜¯ä¸ƒç‰›äº‘ï¼Œéœ€è¦é…ç½®ä¸ƒç‰›äº‘çš„ç›¸å…³ä¿¡æ¯ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©
é˜¿é‡ŒOSSç­‰å…¶ä»–é™æ€æ–‡ä»¶å­˜å‚¨æ–¹å¼

ç¤ºä¾‹demoé¡¹ç›®ç¼–è¯‘å‘½ä»¤
```
  npm run release:demo
```
ç¼–è¯‘åçš„æ–‡ä»¶è¾“å‡ºåˆ°distä¸‹ï¼Œåˆ†ä¸ºimgs,js,css

æ·»åŠ æ–°é¡¹ç›®æ—¶ï¼Œè¯·å‚è€ƒç¤ºä¾‹demoçš„é…ç½®æ–¹å¼æ·»åŠ 

#### ä¸ƒç‰›äº‘CDN
MGç›®å‰æ”¯æŒå‘å¸ƒæ—¶è‡ªåŠ¨ä¸Šä¼ ä¸ƒç‰›äº‘ï¼Œéœ€è¦é…ç½®ä¸ƒç‰›äº‘çš„accesskeyï¼Œsecretkeyç­‰ã€‚åœ¨æ ¹ç›®å½•ä¸‹çš„mg.config.jsä¸­ï¼Œä¿®æ”¹å¦‚ä¸‹é…ç½®(âš ï¸ä¸‹é¢çš„ä¿¡æ¯åªæ˜¯èƒ¡å†™ä¾‹å­)
```
// ä¸ƒç‰›äº‘CDNä¸Šä¼ é…ç½®
module.exports.qconfig = {
    ACCESS_KEY: 'ei1uOdGpVLliA7kb50si4wfYLPwt5v0shU10',
    SECRET_KEY: '-pFFIY-ew35Exyfcd40k15ah3UfZTFWFKF',
    bucket:'hotsts-image',
    origin:'http://ofltzxf.bkt.clouddn.com'
};

// jsï¼Œcssï¼Œå›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶ç¼–è¯‘åå¢åŠ çš„å‰ç¼€
module.exports.cdnPath = '//ofltzxf.bkt.clouddn.com/';

```
cdnPathä¸qconfig.originç›¸å¯¹åº”

#### é˜¿é‡Œäº‘OSS
å³å°†æ”¯æŒ

#### å…¶ä»–CDN
å¦‚æœä½ éœ€è¦å…¶ä»–äº‘æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™æ ·ä¿®æ”¹æ¥æ”¯æŒ
åœ¨/tools/release.js ä¸­çš„ä¸Šä¼ ä»£ç åšä¿®æ”¹
```
webpacker.run((err,status)=>{
    if (util.runCallback(err, status)) {

        if(err){
            console.log(chalk.red('[webpack]ï¼šç¼–è¯‘å¤±è´¥ ' + err.toString()));
            return;
        }

        console.log(chalk.magenta('[webpack]ï¼šç¼–è¯‘å®Œæˆï¼\r\n'));

        qupload('./dist')
    }
});
```
å°†qupload æ–¹æ³•æ”¹æˆä½ çš„äº‘æœåŠ¡å™¨ä¸Šä¼ çš„ä»£ç ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯éå†distä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚æœæ˜¯æ–‡ä»¶ï¼Œåˆ™ä¸Šä¼ ï¼Œå¦åˆ™ç»§ç»­éå†æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ï¼›å¯å‚è€ƒ/tools/qupload.jsçš„é€»è¾‘æ¥å†™

## Todo List
1. æ€§èƒ½ä¼˜åŒ–åŠ å…¥æ‰‹æ·˜çš„ä¸€äº›æ–¹æ¡ˆï¼Œä»¥åŠgoogleçš„æ€§èƒ½ä¼˜åŒ–å†…å®¹
2. æœåŠ¡ç«¯å¢åŠ mongodbï¼Œmysqlï¼Œredisç­‰å¯é€‰é…ç½®
3. ä¸å†ä»…é™äºh5ï¼Œæ–°å¢vue/react + node.js SPAå¯é€‰æ–¹æ¡ˆ
4. æ–‡æ¡£å®Œå–„

## Contribution

[å´ä¿Šå·](https://github.com/wujunchuan)

æ„Ÿè°¢ä¿Šå·æä¾›çš„çƒ­æ›´æ–°æ–¹æ¡ˆçš„å»ºè®®ï¼Œä»¥åŠå¯¹é¡¹ç›®æŸäº›ç»†èŠ‚çš„æ”¹è¿›

## é…å¥—éƒ¨ç½²æ–¹æ¡ˆè¯·å‚è€ƒ
[30åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Š](http://medium.yintage.com/?p=248)


## License

The MIT License è¯·è‡ªç”±äº«å—å¼€æºã€‚




